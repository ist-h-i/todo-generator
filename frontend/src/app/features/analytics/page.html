<section class="space-y-10">
  <header class="space-y-2">
    <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Analytics</p>
    <h2 class="text-2xl font-semibold text-on-surface">ワークスペースの指標</h2>
    <p class="text-sm text-slate-500 dark:text-slate-400">
      完了率やポイント配分、ステータス・ラベルごとの分布を可視化します。
    </p>
  </header>

  @if (summarySignal(); as summary) {
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
      <article class="surface-panel px-6 py-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">進捗率</p>
        <p class="mt-3 text-3xl font-semibold">{{ summary.progressRatio }}%</p>
        <p class="text-sm text-slate-500">完了カード {{ summary.doneCards }}/{{ summary.totalCards }}</p>
      </article>
      <article class="surface-panel px-6 py-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">カード数</p>
        <p class="mt-3 text-3xl font-semibold">{{ summary.totalCards }}</p>
        <p class="text-sm text-slate-500">アクティブラベル {{ summary.activeLabels }}</p>
      </article>
      <article class="surface-panel px-6 py-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">ポイント完了</p>
        <p class="mt-3 text-3xl font-semibold">{{ pointSummary().done }}</p>
        <p class="text-sm text-slate-500">残 {{ pointSummary().remaining }}</p>
      </article>
      <article class="surface-panel px-6 py-6">
        <p class="text-xs uppercase tracking-[0.3em] text-slate-400">総ポイント</p>
        <p class="mt-3 text-3xl font-semibold">{{ pointSummary().total }}</p>
        <p class="text-sm text-slate-500">スプリント負荷の目安に活用</p>
      </article>
    </div>
  }

  <div class="grid gap-4 lg:grid-cols-2">
    <section class="surface-panel space-y-4 px-6 py-6">
      <header class="flex items-center justify-between">
        <h3 class="text-lg font-semibold text-on-surface">ステータス別件数</h3>
        <span class="text-xs text-slate-500">{{ statusBreakdown().length }} ステージ</span>
      </header>
      <ul class="space-y-3">
        @for (item of statusBreakdown(); track item.id) {
          <li class="flex items-center gap-4 rounded-2xl border border-subtle px-4 py-3">
            <span class="h-3 w-3 rounded-full" [style.backgroundColor]="item.color"></span>
            <span class="flex-1 text-sm text-on-surface">{{ item.name }}</span>
            <span class="text-sm font-semibold text-on-surface">{{ item.total }}</span>
          </li>
        }
      </ul>
    </section>

    <section class="surface-panel space-y-4 px-6 py-6">
      <header class="flex items-center justify-between">
        <h3 class="text-lg font-semibold text-on-surface">ラベル別件数</h3>
        <span class="text-xs text-slate-500">{{ labelBreakdown().length }} ラベル</span>
      </header>
      <ul class="space-y-3">
        @for (item of labelBreakdown(); track item.id) {
          <li class="flex items-center gap-4 rounded-2xl border border-subtle px-4 py-3">
            <span class="h-3 w-3 rounded-full" [style.backgroundColor]="item.color"></span>
            <span class="flex-1 text-sm text-on-surface">{{ item.name }}</span>
            <span class="text-sm font-semibold text-on-surface">{{ item.total }}</span>
          </li>
        }
      </ul>
    </section>
  </div>
</section>
