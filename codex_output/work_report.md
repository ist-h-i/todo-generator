**背景**
- 要件: 画面右側にアニメ付きトーストをスタック表示（新しい順に上）、重要度ごとの表示時間/色、エラーは消えない、警告10s、通知5s、システム/ローディング≥3s（ローディングは完了まで）、消える時は右へスライドアウト。
- 方針: 最小差分で、サービス＋ホストコンポーネントに集約。CSSアニメーションのみ、依存追加なし。
- 不明点: 既存通知機構の有無/置換方針、色/影のデザイントークン、最大表示数、手動閉じるUI要否、アクセシビリティ要件、モバイルの安全領域。

**変更概要**
- 通知管理クラス（サービス）を新設し、キュー/タイマー/ID管理を一元化。
  - API例: `showError/Warning/Notice/Loading -> id`, `update(id)`, `dismiss(id)`, `clearAll()`, 汎用 `show(opts)`.
  - ルール: 新着は上に積む、エラーは常駐、警告10s、通知5s、システム≥3s、ローディングは手動終了。
- ホストコンポーネントで右側固定の縦スタックを描画。CSSで入退場アニメ（右からのスライドイン／右へのスライドアウト、約200–300ms）。
- ルートシェルにホストを1行で組込み。既存の散在ロジックはサービス呼び出しに置換。
- 代表ファイル:
  - `frontend/src/app/core/layout/hover-messages/hover-message.service.ts:1`
  - `frontend/src/app/core/layout/shell/shell.ts:20`

**影響**
- 通知の生成/寿命/消失が中央管理され、再利用性と一貫性が向上。
- UIは既存スタイルを尊重しつつ、必要最小限のCSSで所望の動作を実現。
- エラー/ローディングはプログラム的な明示終了が前提（エラーは常駐、ローディングはIDで制御）。
- 外部依存やビルド設定の追加なし。既存機能への影響は限定的。

**検証**
- 単体テスト（サービス）: 
  - 新着優先（上に表示）・キュー順序
  - 重要度別タイマー（エラー常駐、警告10s、通知5s、システム≥3s、ローディング常駐）
  - `dismiss/update` による状態遷移と退場後の削除
- 手動確認:
  - 右側表示、上積み、入退場アニメ（入: フェード/スライドイン、退: 右スライドアウト）
  - 影/色の強度と重要度の整合
  - エラーは残留、警告/通知の自動消滅、ローディングは明示終了で消滅
- 実行例:
  - ビルド: `cd frontend && npm run build`
  - 開発: `cd frontend && npm start`
  - テスト: `cd frontend && npm test`

**レビュー観点**
- 既存の通知機構がある場合の統合/置換戦略の明確化（重複表示の回避）
- デザイントークンの最終マッピング（赤/黄/緑/青の色・影のレベル）
- エラーの手動閉じるUI（×ボタン）の要否、タイマー一時停止（hover/focus）要件
- 最大同時表示数の上限設定（例: 4）とオーバーフロー時の挙動
- アクセシビリティ（`aria-live`, `role=alert/status`, `aria-busy`、キーボード操作）とモバイル安全領域/z-index
- 公開APIの確定（`showError/Warning/Notice/Loading`, `update`, `dismiss`, `clearAll`）と命名/場所の合意

残リスク/オープン事項
- 手動閉じるUIと最大表示数は現状必須ではなく、今後の指示により追加が必要。
- デザイントークン未確定のため、色/影は暫定値でフック済み。最終調整の余地あり。
- 既存通知が同時稼働している場合は二重表示の可能性。統合方針の合意が必要。