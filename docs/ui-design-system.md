# UI デザインシステム（シンプル&モダン版）

アプリ全体にミニマルでモダン、そして洗練されたトーンを行き渡らせるため、視覚構造・タイポグラフィ・コンポーネントの仕様を下記の方針で再整理しました。光と影のコントラスト、配色トークン、操作状態の一貫性を軸にライト／ダーク両テーマで同じ質感を保ちます。各画面の改修や新機能追加時は、本ドキュメントを基準に UI を設計してください。

## コアデザイン原則
1. **余白で魅せる** – 情報密度を抑え、広めの余白と明瞭なグリッドで呼吸感のあるレイアウトを構築する。
2. **コントラストを厳選する** – ベースはニュートラルカラーで構成し、アクセントカラーは重要なアクションや状態のみに限定する。ライト/ダーク双方で背景とテキストのコントラスト比 4.5:1 以上（大きなテキストは 3:1 以上）を確保する。
3. **操作の迷いを無くす** – ボタンやナビゲーションをシンプルな形状・配色で揃え、どこで操作できるかを即座に判断できるようにする。
4. **アクセシブルであること** – 十分なコントラスト、明瞭なフォーカス、スクリーンリーダー向けの構造化を標準仕様とする。

## ビジュアルファウンデーション
### カラーパレット
- **トークン構成**: すべての色は `--color-{semantic}-{state}-{theme}` の命名で管理し、テーマ（`light` / `dark`）と状態（`default` / `hover` / `active` / `disabled`）を明示する。
- **ベース**: `--color-surface`、`--color-surface-alt` を主に使用し、段差は 1px のボーダーや背景トーンの差で表現する。ライトテーマはニュートラル 50〜200、ダークテーマはニュートラル 800〜950 を中心にし、シャドウの代わりに `color-mix` で調整した縁取りを活用する。
- **テキスト**: `--color-text-primary`、`--color-text-secondary` を使い分け、見出しは濃度 90%、補助テキストは 60% を目安にする。ダークテーマでは透過度ではなく明度差で調整し、背景との差を 60 以上（Lab 値換算）確保する。
- **アクセント**: プライマリアクションは `--color-accent`、肯定/警告/エラーは `--color-success` / `--color-warning` / `--color-danger` を用いる。アクセントの乱用を避けるため、ページごとの固有色はトークンのトーン差（濃淡）で表現する。
- **サーフェス**: `--surface-layer-{1-4}` を階層化トークンとして定義し、カード/パネル/ステータスピルの背景に使用する。各レイヤーは `--surface-card` と `--surface-card-muted` のグラデーション値から生成し、ライト/ダークテーマともに同じ構造で入れ替わる。

### テーマ & コントラスト指針
| 対象 | ライトテーマ | ダークテーマ | メモ |
| --- | --- | --- | --- |
| ページ背景 | `--color-surface-light-default` #F8FAFC | `--color-surface-dark-default` #0F172A | いずれもテキストとのコントラスト 4.5:1 以上を担保する。
| カード背景 | `--color-surface-alt-light-default` #FFFFFF | `--color-surface-alt-dark-default` #1E293B | 明度差とヘアラインボーダーでコンテナとの差を明示。
| プライマリテキスト | `--color-text-primary-light` #0F172A | `--color-text-primary-dark` #F8FAFC | 大文字見出しも 3:1 以上を厳守。
| セカンダリテキスト | `--color-text-secondary-light` rgba(15,23,42,0.65) | `--color-text-secondary-dark` rgba(248,250,252,0.70) | 透明度ではなくコントラスト比を都度計測する。 |

> **チェックルール**: 主要コンポーネントの各状態（デフォルト/ホバー/アクティブ/フォーカス/ディスエーブル）は、背景と文字色、背景とボーダー色のコントラスト比を 3:1 以上（可能な限り 4.5:1 以上）に保つ。ダークテーマでは彩度よりも明度差を優先し、アクセントカラーの WCAG AA 適合を確認する。

### サーフェスレイヤー & ボーダー
| トークン | ライトテーマ | ダークテーマ | 主な用途 |
| --- | --- | --- | --- |
| `--surface-layer-1` | `linear-gradient` の上部色。`--surface-card` を 96% ブレンド | `--surface-card` を 94% ブレンド | 基本カード、フォームフィールド、ユーザバッジ |
| `--surface-layer-2` | `--surface-card` を 88% ブレンド | `--surface-card` を 86% ブレンド | セクション／パネルの下部色、カードのボトムトーン |
| `--surface-layer-3` | `--surface-card` を 78% ブレンド | `--surface-card` を 76% ブレンド | ピル、トグル、ホバー時のサーフェス |
| `--surface-layer-4` | `--surface-card` を 68% ブレンド | `--surface-card` を 66% ブレンド | オーバーレイのニュートラルトーン、階層差を強調したい領域 |
`--border-card` / `--border-card-strong` を境界線の標準とし、`--border-subtle` は背景トーンとの差が小さいテキストや要素に限定する。ページラッパーやサブコンテナは `1px solid color-mix(in srgb, var(--color-surface-inverse) 14%, transparent)` のような淡い実線で囲み、背景にはカードより 4% 暗いトーンを敷いて階層を示す。カード・モジュールは `var(--color-border-strong)` を用いた 1px 実線で縁取り、内側に 1px の `inset` ラインを加えて視認性を補強する。状態変化時（ホバー/フォーカス）はボーダー色を 8〜10% 変化させ、背景トーンのシフトと組み合わせてシャドウ無しでも浮き上がりを感じさせる。カード間の視覚的な段差はレイヤートークンの組み合わせ（例: `layer-1` → `layer-2`、`layer-2` → `layer-3`）で統一する。
### ボーダー & レイヤリング
- ページラッパーやサブコンテナは `1px solid color-mix(in srgb, var(--color-surface-inverse) 14%, transparent)` のような淡い実線で囲み、背景にはカードより 4% 暗いトーンを敷いて階層を示す。
- カード・モジュールは `var(--color-border-strong)` を用いた 1px 実線で縁取り、内側に 1px の `inset` ラインを加えて視認性を補強する。
- 状態変化時（ホバー/フォーカス）はボーダー色を 8〜10% 変化させ、背景トーンのシフトと組み合わせてシャドウ無しでも浮き上がりを感じさせる。

### インタラクション状態マトリクス
| コンポーネント | 状態 | ライトテーマ | ダークテーマ | コントラスト指標 |
| --- | --- | --- | --- | --- |
| ボタン primary | Default / Hover / Active | #2563EB / #1D4ED8 / #1E40AF | #3B82F6 / #2563EB / #1D4ED8 | テキストは常に #FFFFFF（7:1 以上） |
| ボタン secondary | Default / Hover / Active | #FFFFFF + #CBD5F5 ボーダー / 背景+4% トーン / 背景+8% トーン | #1E293B + #3B4B65 ボーダー / 背景-6% / 背景-10% | テキストは #1E293B or #F8FAFC、最低 4.5:1 |
| ゴーストボタン | Default / Hover / Active | テキスト #1E293B / 背景 rgba(30,41,59,0.06) / rgba(30,41,59,0.10) | テキスト #E2E8F0 / 背景 rgba(226,232,240,0.12) / rgba(226,232,240,0.18) | 背景との差 3:1 以上 |
| カード | Default / Hover | #FFFFFF / #F1F5F9 | #1E293B / #243044 | コンテンツテキストは 4.5:1 以上 |
| ステータスピル | Default / Hover | 背景 #E0F2FE〜#FEE2E2 / テキスト #0369A1 など | 背景 #0F2F49〜#3F1D2B / テキスト #E0F2FE など | 背景と文字差 4.5:1 以上 |
| Disabled 要素 | 全テーマ | 背景は隣接トーンとの差 12 以上、文字は #94A3B8（ライト）/#475569（ダーク）で 3:1 を担保 | - |

### タイポグラフィ
- ベースフォントは `Inter` + `Noto Sans JP`、本文サイズは 16px（rem 基準）。
- 見出しは 3 段階のスケールを採用し、`--font-size-heading-lg`（ページタイトル）、`--font-size-heading-md`（セクション）、`--font-size-heading-sm`（カード/リスト）を基準にする。
- 行間は本文 1.6、見出し 1.3 を目安とし、段落間スペースは `1em` 以上を確保する。
- ダッシュボードなどの KPI 数値は `.metric-card__value` を使用し、`font-size: clamp(1.5rem, 1.2rem + 1vw, 2.25rem)` / `font-weight: 600` を標準とする。これにより、モバイル時の過剰な拡大を抑えつつデスクトップでは視認性を維持する。

### スペーシング & 角丸
- ベース余白は 8px グリッド。カードやパネル内は `24px`、コンポーネント間は `16px` を基準とし、セクション間は `32px` を目安にする。
- 角丸は `--radius-md`（8px）をデフォルト、カードコンテナやモーダルは `--radius-lg`（16px）を使用し、統一感を持たせる。
- 影での段差表現は禁止し、境界線（1px）と背景トーンのコントラストで階層を示す。親コンテナは透過率 12% 前後のボーダー、子カードはクリアな実線ボーダーで視覚的に分離する。

### アイコノグラフィ & フォーカス
- アイコンはストローク 1.5px のラインアイコンで統一し、サイズは 20px / 24px を基準にする。
- フォーカスリングは `outline: 2px solid var(--color-accent); outline-offset: 2px;` を標準化し、全インタラクティブ要素に適用する。

## レイアウトテンプレート
### アプリケーションシェル
- 全ページは `.app-page` をルートに使用し、上下左右の余白は `clamp(40px, 8vw, 72px)` を基準に確保する。
- シェル内の構造は「固定ヘッダー（ロゴ・主要ナビ）」「コンテンツラッパー」「フッター」で統一。サイドバーが必要な画面もコンテンツラッパー内の 2 カラム構造として定義する。

### ページタイトル（Page Header）
- `app-page-header` コンポーネントを全ページで共通利用する。構造は以下の 4 エリアで構成する:
  - **Eyebrow**: カテゴリ名やパンくずを小さなサンセリフで表示。
  - **Title**: ページ固有タイトル。28px/700 を基本。
  - **Description**: 1〜2 行の補足説明。テキスト濃度 60%。
  - **Actions**: 右側にプライマリ・セカンダリボタン、タブやフィルタが続く場合は下部に整列する。
- バックグラウンドはフラット（サーフェスと同色）とし、ボーダーで区切らない。

### グリッド & コンテナ
- セクション分割は `.page-section` を使用。ヘッダ（タイトル、説明、アクション）とボディの 2 パートで構成し、セクション間は 32px の余白を置く。
- 複数列が必要な場合は `.page-grid` を使用し、ブレークポイント 1024px を境に 2 カラム → 1 カラムへ変化させる。
- サイドバーやフィルタ列も `.page-grid--sidebar` として実装し、カード群と余白を揃える。

## コンポーネント仕様
### シンプルボタン（Button）
- ベースクラス `.button` は高さ 44px、横幅はコンテンツに合わせる。フォントは 15px/600。パディングは `0 20px`、文字と背景のコントラスト比は常に 4.5:1 以上。
- バリエーション:
  - `.button--primary`: 背景 `--color-accent-{state}`, テキストは `--color-text-on-accent-{state}`。ホバー時は 8% 暗く、アクティブ時は 12% 暗くする。ライトテーマでは最小 4.8:1、ダークテーマでは 7:1 のコントラストを確保する。
  - `.button--secondary`: 背景 `--color-surface-alt`, 枠線 `--color-border`. ホバーで枠線とテキストを 10% 濃くし、アクティブでは背景に 6% のトーンを追加。ディスエーブル時はボーダーを 30% の濃度に落としつつ 3:1 を維持。
  - `.button--ghost`: 背景透明、テキストはプライマリ。ホバー時は `rgba(surface, 0.08)`、アクティブ時は `rgba(surface, 0.12)` のオーバーレイで必ず 3:1 以上の差を取る。
  - `.button--pill`: 角丸 `999px`。フィルタやタグ選択に使用し、選択状態はアクセント背景、非選択状態はゴーストを踏襲する。
- アイコンを含む場合は 8px のギャップを保ち、アイコンは 20px サイズ。
- フォーカス状態では背景色を変えず、2px のアクセントアウトラインを追加する。
- ローディングやディスエーブル状態でも文字色の透明度を下げず、背景トーンを調整して 3:1 のコントラストを保持する。

### カード（Card）
- `.surface-card` を基準に高さ可変のカードを定義。背景は `linear-gradient(180deg, var(--surface-layer-1), var(--surface-layer-2))`、外枠は `1px solid var(--color-border-strong)`、角丸内側に `inset 0 0 0 1px color-mix(in srgb, var(--color-surface-alt) 70%, transparent)` の縁取りを追加してレイヤーを強調する。内側余白は 24px、角丸 12px。
- ヘッダー（タイトル + メタ情報）、ボディ（本文）、フッター（操作）の 3 パートを推奨。ヘッダーは Flex で左右配置し、タイトルは 18px/600。
- 状態ラベルは右上に `surface-pill` を配置し、背景はアクセントの 12% トーンを使用する。
- ホバー時は背景トーンを 6% 明るく（ダークでは 6% 暗く）し、アクションの存在を示す。文字色は変えずに 4.5:1 を維持する。

### カードコンテナ（Card Container）
- 複数のカードを並べる場合は `.card-collection` を用意し、`display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px;` を基本とする。
- カンバン形式では `.board-columns` を使用し、列ヘッダーもカードと同じスタイルで揃える。列・サブカラムは `linear-gradient(180deg, var(--surface-layer-2), var(--surface-layer-3))` を標準とし、カード（`layer-1` → `layer-2`）とのコントラストで段差を表現する。コンテナ全体にはカードより 4% 暗い（ライトテーマ）/明るい（ダークテーマ）トーンを敷き、`1px` の内向きボーダー（`inset` シャープライン）を追加する。カード外枠とのダブルボーダーで階層を際立たせ、ホバー時はカード背景をトーンシフトさせて境界が滲まないようにする。列間余白は 24px。
- コンテナ全体にはカードより 4% 暗い（ライトテーマ）/明るい（ダークテーマ）トーンを敷き、`1px` の内向きボーダー（`inset` シャープライン）を追加する。カード外枠とのダブルボーダーで階層を際立たせ、ホバー時はカード背景をトーンシフトさせて境界が滲まないようにする。

### リスト & テーブル
- `.page-list` は縦方向のカード群を軽量に表現するスタイル。`grid-template-columns: repeat(auto-fit, minmax(18rem, 1fr))` で最大 3 列まで展開し、ビューポートに応じて 1 列へ自動的に戻る。各アイテムは 16px の上下余白とボーダーで区切る。
- テーブルは `.page-table` を基準に、ヘッダ背景を `--color-surface-alt`、セル余白は 16px とする。斜線や濃い罫線は使用せず、ストライプで視認性を確保。

### フォーム
- 各入力は `.form-field`（ラベル、説明、入力）の構造を守る。ラベルは 14px/600、説明文は 12px/60% トーン。
- 入力コントロールは高さ 44px、角丸 8px、ボーダーは `1px solid var(--color-border)`。フォーカス時はボーダーをアクセントカラーに変更。
- 複数項目を並べる場合は `.form-grid` を用い、2 カラム時は `minmax(240px, 1fr)` を基本とする。
- バリデーションメッセージは赤系のテキストで入力直下に表示し、`role="alert"` を付与する。
- Disabled 状態では `var(--surface-layer-3)` をベースにアクセントトーンを 8% 上乗せし、文字色はセカンダリトーンを維持することで 3:1 を確保する。

### ステータスチップ & バッジ
- `.surface-pill` をベースに、丸み 999px、余白は `8px 12px`。テキストは 13px/600。
- 状態ごとに `--pill-success`、`--pill-warning`、`--pill-danger` を用意し、背景は 16% トーン、テキストは濃色でコントラストを確保。
- カード内の補助ラベルは `.page-badge` を使用し、角丸 6px のフラットなラベルとして表示する。

### タブ & トグル
- `.page-tabs` は水平方向に配置し、アクティブタブはアクセント色の下線 + テキスト色 100%。非アクティブは 60% トーン。
- トグルは `.form-toggle` を使用し、チェック時のみアクセント色、未チェック時はボーダーのみのミニマルな見た目とする。
- 各状態の配色はライト/ダークともに 3:1 以上のコントラストとなるよう、背景トーンとラベル色をセットで定義する。ホバー時は下線を 2px に強調し、アクティブ状態は背景に 8% のトーンを加える。

### フィードバック & 空状態
- 成功/警告/エラーのメッセージは `app-alert` を使用し、アイコン + タイトル + 説明文 + アクションの 4 パート構成。
- 空状態やロード中は `.page-state` を採用し、イラストやアイコンは 64px 程度の単色ラインアイコンで統一する。

### ダイアログ / モーダル
- `.app-dialog` をベースに最大幅 480px、角丸 16px。ヘッダー（タイトル + クローズ）、ボディ（テキスト or フォーム）、フッター（アクション）を明確に分ける。
- オーバーレイは 40% のブラックで画面全体を覆い、背景スクロールを禁止する。

## 運用ルール
1. 新規 UI を追加する際は上記コンポーネントを優先的に利用し、独自スタイルを定義する場合はデザインチームと合意する。
2. Figma などのデザインファイルは本ガイドラインと同期し、差異が生じた場合は双方を更新する。
3. ダークテーマは同じ構造を維持し、色トークンのみの差し替えで成立するようにする。新規トークンを追加する場合はライト/ダーク両テーマと各状態のコントラスト値（WCAG AA 適合）を記録する。
4. 変更履歴を `docs/ui-design-system.md` に追記し、主要コンポーネントの更新内容を開発チームと共有する。

